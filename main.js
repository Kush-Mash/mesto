(()=>{"use strict";var t=document.querySelector(".profile__edit-button"),e=document.querySelector(".profile__add-button"),n=document.querySelector(".profile__avatar-edit-button"),r=document.querySelector(".popup_modify_user-info"),o=r.querySelector(".popup__input_type_name"),i=r.querySelector(".popup__input_type_job"),u=document.forms.formAboutUser,a=document.forms.formAboutPlace,c=document.forms.formAboutAvatar,l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var p=function(){function t(e,n){var r=e.data,o=e.currentUserId,i=e.handleCardClick,u=e.handleAddLike,a=e.handleDelLike,c=e.handleTrashClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=r,this._name=r.name,this._link=r.link,this._id=r._id,this._userId=o,this._owner=r.owner._id,this._likes=r.likes,this._templateSelector=n,this._handleCardClick=i,this._handleAddLike=u,this._handleDelLike=a,this._handleTrashClick=c}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"getId",value:function(){return this._id}},{key:"_checkDeletion",value:function(){this._owner!==this._userId&&(this._buttonTrash.remove(),this._buttonTrash=null)}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_checkReactions",value:function(){this._buttonLike.classList.contains("element__toggle_active")?this._handleDelLike(this._id):this._handleAddLike(this._id)}},{key:"handleLikeClick",value:function(t){this._likes=t.likes,this._buttonLike.classList.toggle("element__toggle_active"),this._likesCounter.textContent=this._likes.length}},{key:"_likeUser",value:function(){var t=this;this._likes.some((function(e){return t._userId===e._id}))&&this._buttonLike.classList.add("element__toggle_active")}},{key:"_setEventListeners",value:function(){var t=this;this._buttonTrash.addEventListener("click",(function(){t._handleTrashClick()})),this._buttonLike.addEventListener("click",(function(){t._checkReactions()})),this._cardImage.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)}))}},{key:"generateCard",value:function(){var t=this;return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".element__mask-group"),this._cardTitle=this._element.querySelector(".element__title"),this._buttonLike=this._element.querySelector(".element__toggle"),this._buttonTrash=this._element.querySelector(".element__trash"),this._likesCounter=this._element.querySelector(".element__counter"),this._likes.forEach((function(e){e._id===t._userId&&t._buttonLike.classList.add("element__toggle_active")})),this._likesCounter.textContent=this._likes.length,this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this._checkDeletion(),this._element}}])&&f(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}var d=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(e.inputSelector)),this._buttonElement=this._formElement.querySelector(e.submitButtonSelector),this._showInputError=this._showInputError.bind(this),this._hideInputError=this._hideInputError.bind(this),this._toggleInputErrorState=this._toggleInputErrorState.bind(this)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),n.textContent=e}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.textContent=""}},{key:"_toggleInputErrorState",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_enableButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._toggleInputErrorState(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}var m=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=document.querySelector(n),this._renderer=r}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){var e=this;t.reverse().forEach((function(t){e._renderer(t)}))}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}var S=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-button"))&&t.close(t._popup)}))}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},E.apply(this,arguments)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._picture=e._popup.querySelector(".popup__picture"),e._pictureName=e._popup.querySelector(".popup__picture-name"),e}return e=u,(n=[{key:"open",value:function(t){E(P(u.prototype),"open",this).call(this),this._picture.src=t.link,this._picture.alt="Фотография места ".concat(t.name),this._pictureName.textContent=t.name}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(S);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._popupForm=e._popup.querySelector(".popup__form"),e._inputList=e._popup.querySelectorAll(".popup__input"),e._btnSubmit=e._popup.querySelector(".popup__button"),e._handleFormSubmit=r,e}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this;I(R(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){I(R(u.prototype),"close",this).call(this)}},{key:"showLoading",value:function(t){this._btnSubmit.textContent=t?"Сохранение...":"Сохранить"}}])&&L(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(S);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==A(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===A(o)?o:String(o)),r)}var o}var x=function(){function t(e){var n=e.userNameSelector,r=e.userJobSelector,o=e.userAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(n),this._userJob=document.querySelector(r),this._avatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,job:this._userJob.textContent,avatar:this._avatar.src}}},{key:"getUserId",value:function(){return this._id}},{key:"setUserInfo",value:function(t){this._userName.textContent=t.name,this._userJob.textContent=t.about,this._avatar.src=t.avatar,this._id=t._id}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}var U=function(){function t(e){var n=e.basePath,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._basePath=n,this._headers=r}var e,n;return e=t,(n=[{key:"_getJson",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getServerCards",value:function(){return fetch("".concat(this._basePath,"/cards"),{headers:this._headers}).then(this._getJson).catch((function(t){return console.log(t),Promise.reject(t)}))}},{key:"postNewCard",value:function(t){return fetch("".concat(this._basePath,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then(this._getJson)}},{key:"getCurrentUser",value:function(){return fetch("".concat(this._basePath,"/users/me"),{headers:this._headers}).then(this._getJson)}},{key:"updateUserInfo",value:function(t){return fetch("".concat(this._basePath,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.job})}).then(this._getJson)}},{key:"updateAvatar",value:function(t){return fetch("".concat(this._basePath,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then(this._getJson)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._basePath,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._getJson)}},{key:"like",value:function(t){return fetch("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then(this._getJson)}},{key:"dislike",value:function(t){return fetch("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then(this._getJson)}}])&&J(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==N(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===N(o)?o:String(o)),r)}var o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},F.apply(this,arguments)}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(o){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._formElement=n._popup.querySelector(".popup__form_modify_confirm"),n._cardObject={},n._handleConfirmDelete=e,n}return e=u,(n=[{key:"open",value:function(t){F(M(u.prototype),"open",this).call(this),this._cardObject=t}},{key:"setEventListeners",value:function(){var t=this;F(M(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(e){e.preventDefault(),t._handleConfirmDelete(t._cardObject)}))}}])&&V(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(S);function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var G,K=new U({basePath:"https://mesto.nomoreparties.co/v1/cohort-61",headers:{authorization:"545040d2-ca8d-4af4-bb28-cd05a11607d7","Content-Type":"application/json"}});Promise.all([K.getServerCards(),K.getCurrentUser()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];G=i._id,nt.setUserInfo(i),Q.renderItems(o)})).catch((function(t){console.log(t)}));var Q=new m({renderer:function(t){Q.addItem(X(t))}},".elements__box"),W=new z(".popup_modify_confirm",(function(t){K.deleteCard(t.getId()).then((function(){t.deleteCard(),W.close()})).catch((function(t){console.log(t)}))}));W.setEventListeners();var X=function(t){var e=new p({data:t,currentUserId:G,handleCardClick:function(){et.open(t)},handleAddLike:function(){K.like(e.getId()).then((function(t){e.handleLikeClick(t)})).catch((function(t){console.log(t)}))},handleDelLike:function(){K.dislike(e.getId()).then((function(t){e.handleLikeClick(t)})).catch((function(t){console.log(t)}))},handleTrashClick:function(){W.open(e)}},".template-card");return e.generateCard()},Y=new d(l,u);Y.enableValidation();var Z=new d(l,a);Z.enableValidation();var tt=new d(l,c);tt.enableValidation();var et=new O(".popup_modify_image");et.setEventListeners();var nt=new x({userNameSelector:".profile__title",userJobSelector:".profile__subtitle",userAvatarSelector:".profile__avatar"}),rt=new q({popupSelector:".popup_modify_user-info",handleFormSubmit:function(t){rt.showLoading(!0),K.updateUserInfo(t).then((function(t){nt.setUserInfo(t),rt.close()})).catch((function(t){console.log(t)})).finally((function(){rt.showLoading(!1)}))}});rt.setEventListeners(),t.addEventListener("click",(function(){var t=nt.getUserInfo();o.value=t.name,i.value=t.job,u.reset(),Y.resetValidation(),rt.open()}));var ot=new q({popupSelector:".popup_modify_new-place",handleFormSubmit:function(t){ot.showLoading(!0),K.postNewCard(t).then((function(t){Q.addItem(X(t)),ot.close()})).catch((function(t){console.log(t)})).finally((function(){ot.showLoading(!1)}))}});ot.setEventListeners(),e.addEventListener("click",(function(){a.reset(),Z.resetValidation(),ot.open()}));var it=new q({popupSelector:".popup_modify_avatar",handleFormSubmit:function(t){it.showLoading(!0),K.updateAvatar(t).then((function(t){nt.setUserInfo(t),it.close()})).catch((function(t){console.log(t)})).finally((function(){it.showLoading(!1)}))}});it.setEventListeners(),n.addEventListener("click",(function(){it.open(),c.reset(),tt.resetValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEIsSUFDQzhDLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxJQUNDMEMsU0FBUSxXQUNQTyxHQUFvQlQsYUFBWSxFQUNsQyxHQUNGLElBRUZTLEdBQW9CckIsb0JBRXBCL0wsRUFBYTZELGlCQUFpQixTQUFTLFdBQ3JDdUosR0FBb0JuQixPQUNwQjFMLEVBQWdCeU0sUUFDaEJQLEdBQWdCUSxpQkFDbEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBidXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmNvbnN0IGJ1dHRvbkF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItZWRpdC1idXR0b24nKTtcclxuY29uc3QgcG9wdXBVc2VySW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9tb2RpZnlfdXNlci1pbmZvJyk7XHJcbmNvbnN0IG5hbWVJbnB1dCA9IHBvcHVwVXNlckluZm8ucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcclxuY29uc3Qgam9iSW5wdXQgPSBwb3B1cFVzZXJJbmZvLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9qb2InKTtcclxuY29uc3QgcG9wdXBGb3JtVXNlciA9IGRvY3VtZW50LmZvcm1zWydmb3JtQWJvdXRVc2VyJ107XHJcbmNvbnN0IHBvcHVwRm9ybVBsYWNlID0gZG9jdW1lbnQuZm9ybXNbJ2Zvcm1BYm91dFBsYWNlJ107XHJcbmNvbnN0IHBvcHVwRm9ybUF2YXRhciA9IGRvY3VtZW50LmZvcm1zWydmb3JtQWJvdXRBdmF0YXInXTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fZGlzYWJsZWQnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICBlcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yX3Zpc2libGUnXHJcbn07XHJcblxyXG5leHBvcnQgeyBidXR0b25FZGl0LCBwb3B1cEZvcm1Vc2VyLCBuYW1lSW5wdXQsIGpvYklucHV0LFxyXG4gIGJ1dHRvbkFkZCwgcG9wdXBGb3JtUGxhY2UsIHZhbGlkYXRpb25Db25maWcsIGJ1dHRvbkF2YXRhciwgcG9wdXBGb3JtQXZhdGFyIH07XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3Ioe2RhdGEsIGN1cnJlbnRVc2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlQWRkTGlrZSwgaGFuZGxlRGVsTGlrZSwgaGFuZGxlVHJhc2hDbGlja30sIHRlbXBsYXRlU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl91c2VySWQgPSBjdXJyZW50VXNlcklkOyAvLyBpZCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0YHQtdC50YfQsNGBXG4gICAgdGhpcy5fb3duZXIgPSBkYXRhLm93bmVyLl9pZDsgLy8gaWQg0YXQvtC30Y/QuNC90LAg0LrQsNGA0YLQvtGH0LrQuFxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcblxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVBZGRMaWtlID0gaGFuZGxlQWRkTGlrZTtcbiAgICB0aGlzLl9oYW5kbGVEZWxMaWtlID0gaGFuZGxlRGVsTGlrZTtcbiAgICB0aGlzLl9oYW5kbGVUcmFzaENsaWNrID0gaGFuZGxlVHJhc2hDbGljaztcbiAgfTtcblxuICAvLyDQmtC70L7QvdC40YDQvtCy0LDRgtGMINC4INCy0LXRgNC90YPRgtGMINGA0LDQt9C80LXRgtC60YMg0YTQvtGA0LzRi1xuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdldElkKCkge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfTtcblxuICAvLyDRg9Cx0LjRgNCw0LXRgiDQutC+0YDQt9C40L3RgyDRgSDRh9GD0LbQuNGFINC60LDRgNGC0L7Rh9C10LpcbiAgX2NoZWNrRGVsZXRpb24oKSB7XG4gICAgaWYgKHRoaXMuX293bmVyICE9PSB0aGlzLl91c2VySWQpIHtcbiAgICAgICB0aGlzLl9idXR0b25UcmFzaC5yZW1vdmUoKTtcbiAgICAgICB0aGlzLl9idXR0b25UcmFzaCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpOyAvLyDRg9C00LDQu9GP0LXRgtGB0Y8g0YDQsNC30LzQtdGC0LrQsCDQuNC3IGh0bWxcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDsgLy8g0L7QsdC90YPQu9GP0LXRgtGB0Y8g0YHQsNC8INC+0LHRitC10LrRgiDQutCw0YDRgtC+0YfQutC4LCDRh9GC0L7QsdGLINC90LUg0L7RgdGC0LDQstCw0YLRjNGB0Y8g0LIg0L/QsNC80Y/RgtC4INC/0YDQuNC70L7QttC10L3QuNGPINC4INC90LUg0L/QvtGC0YDQtdCx0LvRj9GC0Ywg0YDQtdGB0YPRgNGB0YtcbiAgfTtcblxuICAvLyDRgdGC0LDQstC40YIv0YPQsdC40YDQsNC10YIgPNCXXG4gIF9jaGVja1JlYWN0aW9ucygpIHtcbiAgICBpZiAodGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QuY29udGFpbnMoJ2VsZW1lbnRfX3RvZ2dsZV9hY3RpdmUnKSkge1xuICAgICAgdGhpcy5faGFuZGxlRGVsTGlrZSh0aGlzLl9pZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hhbmRsZUFkZExpa2UodGhpcy5faWQpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUxpa2VDbGljayhkYXRhKSB7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fdG9nZ2xlX2FjdGl2ZScpO1xuICAgIHRoaXMuX2xpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgfTtcblxuICBfbGlrZVVzZXIoKSB7XG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKHVzZXIpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl91c2VySWQgPT09IHVzZXIuX2lkO1xuICAgIH0pKSB7XG4gICAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX3RvZ2dsZV9hY3RpdmUnKTtcbiAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9idXR0b25UcmFzaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2soKTtcbiAgICB9KTtcbiAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5fY2hlY2tSZWFjdGlvbnMoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaylcbiAgICB9KTtcbiAgfTtcblxuICAvLyDQndCw0L/QvtC70L3QuNGC0Ywg0YLQtdC80L/Qu9C10LnRgiDRgdC+0LTQtdGA0LbQuNC80YvQvFxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgLy8g0JfQsNC/0LjRiNC10Lwg0YDQsNC30LzQtdGC0LrRgyDQsiDQv9GA0LjQstCw0YLQvdC+0LUg0L/QvtC70LUgX2VsZW1lbnQuXG4gICAgLy8g0KLQsNC6INGDINC00YDRg9Cz0LjRhSDRjdC70LXQvNC10L3RgtC+0LIg0L/QvtGP0LLQuNGC0YHRjyDQtNC+0YHRgtGD0L8g0Log0L3QtdC5LlxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbWFzay1ncm91cCcpO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJyk7XG4gICAgdGhpcy5fYnV0dG9uTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RvZ2dsZScpO1xuICAgIHRoaXMuX2J1dHRvblRyYXNoID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdHJhc2gnKTtcbiAgICB0aGlzLl9saWtlc0NvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19jb3VudGVyJyk7XG4gICAgdGhpcy5fbGlrZXMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGlmIChlbC5faWQgPT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX3RvZ2dsZV9hY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMuX2xpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9jaGVja0RlbGV0aW9uKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfTtcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih2YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9zaG93SW5wdXRFcnJvciA9IHRoaXMuX3Nob3dJbnB1dEVycm9yLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvciA9IHRoaXMuX2hpZGVJbnB1dEVycm9yLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl90b2dnbGVJbnB1dEVycm9yU3RhdGUgPSB0aGlzLl90b2dnbGVJbnB1dEVycm9yU3RhdGUuYmluZCh0aGlzKTtcclxuICB9O1xyXG5cclxuICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0LTQvtCx0LDQstC70Y/QtdGCINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIC8vINCd0LDRhdC+0LTQuNC8INGN0LvQtdC80LXQvdGCINC+0YjQuNCx0LrQuCDQstC90YPRgtGA0Lgg0YHQsNC80L7QuSDRhNGD0L3QutGG0LjQuFxyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIC8vINCf0L7QutCw0LfRi9Cy0LDQtdC8INGB0L7QvtCx0YnQtdC90LjQtSDQvtCxINC+0YjQuNCx0LrQtVxyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gIH07XHJcblxyXG4gIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDRg9C00LDQu9GP0LXRgiDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5XHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQv9GA0L7QstC10YDRj9C10YIg0LLQsNC70LjQtNC90L7RgdGC0Ywg0L/QvtC70Y9cclxuICBfdG9nZ2xlSW5wdXRFcnJvclN0YXRlKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyDQpNGD0L3QutGG0LjRjyDQstC10YDQvdGR0YIgdHJ1ZSDQtdGB0LvQuCDRhdC+0YLRjyDQsdGLINC+0LTQvdC+INC/0L7Qu9C1INC90LXQstCw0LvQuNC00L3QvlxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pXHJcbiAgfTtcclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICB9O1xyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIC8vINCQ0LrRgtC40LLQvdCw0Y8v0L3QtdCw0LrRgtC40LLQvdCw0Y8g0LrQvdC+0L/QutCwXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgLy8g0JXRgdC70Lgg0LXRgdGC0Ywg0YXQvtGC0Y8g0LHRiyDQvtC00LjQvSDQvdC10LLQsNC70LjQtNC90YvQuSDQuNC90L/Rg9GCXHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8g0J7QsdC+0LnQtNGR0Lwg0LLRgdC1INGN0LvQtdC80LXQvdGC0Ysg0L/QvtC70YPRh9C10L3QvdC+0Lkg0LrQvtC70LvQtdC60YbQuNC4XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIC8vINC60LDQttC00L7QvNGDINC/0L7Qu9GOINC00L7QsdCw0LLQuNC8INC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPIGlucHV0XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVJbnB1dEVycm9yU3RhdGUoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxufTtcclxuIiwiLy8g0JHQtdGA0ZHRgiDRgNCw0LfQvNC10YLQutGDINC4INCy0YHRgtCw0LLQu9GP0LXRgiDQsiBET01cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7cmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3RvcikgeyAvLyDRg9Cx0YDQsNC70LggaXRlbXMg0LjQtyDQsNGA0LPRg9C80LXQvdGC0L7QsiDQuCDQuNC3INC60L7QvdGB0YLRgNGD0LrRgtC+0YDQsFxuICAgIC8vIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICB9O1xuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9O1xuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7IC8vIGl0ZW1zINGB0Y7QtNCwINCx0YPQtNGD0YIg0L/RgNC40YXQvtC00LjRgtGMINC60LDRgNGC0L7Rh9C60Lgg0YEg0YHQtdGA0LLQtdGA0LBcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4geyAvLyDQstC80LXRgdGC0L4g0L3QsNGH0LDQu9GM0L3Ri9GFIHRoaXMuX3JlbmRlcmVkSXRlbXMg0L/QvtGB0YLQsNCy0LjQu9C4INC60LDRgNGC0L7Rh9C60Lgg0YEg0YHQtdGA0LLQtdGA0LAgLSBpdGVtc1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH07XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9O1xyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH07XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UodGhpcy5fcG9wdXApXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9O1xyXG59O1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcGljdHVyZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGljdHVyZScpO1xyXG4gICAgdGhpcy5fcGljdHVyZU5hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3BpY3R1cmUtbmFtZScpO1xyXG4gIH07XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fcGljdHVyZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9waWN0dXJlLmFsdCA9IGDQpNC+0YLQvtCz0YDQsNGE0LjRjyDQvNC10YHRgtCwICR7ZGF0YS5uYW1lfWA7XHJcbiAgICB0aGlzLl9waWN0dXJlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICB9O1xyXG59O1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXR9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICAgIHRoaXMuX2J0blN1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgLy8g0LrQvtC70LHRjdC6INGB0LDQsdC80LjRgtCwINGE0L7RgNC80YtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfTtcblxuICAvLyDQodCx0L7RgCDQtNCw0L3QvdGL0YUg0LLRgdC10YUg0L/QvtC70LXQuSDRhNC+0YDQvNGLXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAvLyDQv9GD0YHRgtC+0Lkg0L7QsdGK0LXQutGCXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIC8vINC30L3QsNGH0LXQvdC40Y8g0LLRgdC10YUg0L/QvtC70LXQuSDQvtCx0YrQtdC60YLQsFxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vINC/0LXRgNC10LTQsNGR0Lwg0YTRg9C90LrRhtC40Lgg0L7QsdGK0LXQutGCINC30L3QsNGH0LXQvdC40Lkg0LjQvdC/0YPRgtC+0LJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfTtcblxuICBzaG93TG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9idG5TdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idG5TdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJztcbiAgICB9O1xuICB9O1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe3VzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhclNlbGVjdG9yKTtcbiAgfTtcblxuICAvLyDQotC+LCDRh9GC0L4g0L3QsCDQtNCw0L3QvdGL0Lkg0LzQvtC80LXQvdGCINC40LfQstC10YHRgtC90L4g0L4g0Y7Qt9C10YDQtSwg0L/QvtC80LXRidCw0LXRgtGB0Y8g0LIg0LjQvdC/0YPRgtGLINC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmNcbiAgICB9O1xuICAgIHJldHVybiB1c2VySW5mbztcbiAgfTtcblxuICBnZXRVc2VySWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG5cbiAgLy8g0JTQsNC90L3Ri9C1INGBINGB0LXRgNCy0LXRgNCwINC/0L7QtNGB0YLQsNCy0LvRj9C10Lwg0LIg0L/RgNC+0YTQuNC70YxcbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICB9O1xufTtcbiIsIlxuLy8g0KLQvtC60LXQvTogNTQ1MDQwZDItY2E4ZC00YWY0LWJiMjgtY2QwNWExMTYwN2Q3XG4vLyDQmNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDQs9GA0YPQv9C/0Ys6IGNvaG9ydC02MVxuLy8g0JDQtNGA0LXRgSDRgdC10YDQstC10YDQsCDQv9GA0L7QtdC60YLQsCBNZXN0bzogaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvLlxuXG4vLyDQmNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDQs9GA0YPQv9C/0Ysg0LTQvtC70LbQtdC9INCx0YvRgtGMINCyIFVSTCDRgdGA0LDQt9GDINC/0L7RgdC70LUgdjEuINCS0YHQtdCz0LTQsCDQvtCx0YDQsNGJ0LDQudGC0LXRgdGMINC6INGB0LLQvtC10Lkg0LPRgNGD0L/Qv9C1LiDQldGB0LvQuCDQvtCx0YDQsNGC0LjRgtGM0YHRjyDQuiDRh9GD0LbQvtC5LCDRgdC10YDQstC10YAg0LLQtdGA0L3RkdGCINC+0YjQuNCx0LrRgy5cblxuLy8gR0VUIGh0dHBzOi8vbm9tb3JlcGFydGllcy5jby92MS9jb2hvcnRJZC91c2Vycy9tZVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7YmFzZVBhdGgsIGhlYWRlcnN9KSB7XG4gICAgdGhpcy5fYmFzZVBhdGggPSBiYXNlUGF0aDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9nZXRKc29uKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0U2VydmVyQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2dldEpzb24pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICB9KVxuICB9XG5cbiAgcG9zdE5ld0NhcmQoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlUGF0aH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgbGluazogZGF0YS5saW5rXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2dldEpzb24pO1xuICB9XG5cbiAgLy8g0J/QvtC70YPRh9C40YLRjCDQtNCw0L3QvdGL0LUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIGdldEN1cnJlbnRVc2VyKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlUGF0aH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9nZXRKc29uKTtcbiAgfVxuXG4gIC8vINCe0LHQvdC+0LLQuNGC0Ywg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICB1cGRhdGVVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgYWJvdXQ6IGRhdGEuam9iXG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fZ2V0SnNvbilcbiAgfVxuXG4gIC8vINCe0LHQvdC+0LLQuNGC0Ywg0LDQstCw0YLQsNGAXG4gIHVwZGF0ZUF2YXRhcihkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyXG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fZ2V0SnNvbilcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoX2lkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS9jYXJkcy8ke19pZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2dldEpzb24pO1xuICB9XG5cbiAgbGlrZShfaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVBhdGh9L2NhcmRzLyR7X2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9nZXRKc29uKVxuICB9XG5cbiAgZGlzbGlrZShfaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVBhdGh9L2NhcmRzLyR7X2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9nZXRKc29uKVxuICB9XG59XG5cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVDb25maXJtRGVsZXRlKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fbW9kaWZ5X2NvbmZpcm0nKTtcbiAgICB0aGlzLl9jYXJkT2JqZWN0ID0ge307XG4gICAgdGhpcy5faGFuZGxlQ29uZmlybURlbGV0ZSA9IGhhbmRsZUNvbmZpcm1EZWxldGU7XG4gIH07XG5cbiAgb3BlbihjYXJkKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2NhcmRPYmplY3QgPSBjYXJkO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBldnQgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVDb25maXJtRGVsZXRlKHRoaXMuX2NhcmRPYmplY3QpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBidXR0b25FZGl0LCBwb3B1cEZvcm1Vc2VyLCBuYW1lSW5wdXQsIGpvYklucHV0LFxuICBidXR0b25BZGQsIHBvcHVwRm9ybVBsYWNlLCB2YWxpZGF0aW9uQ29uZmlnLCBidXR0b25BdmF0YXIsIHBvcHVwRm9ybUF2YXRhciB9IGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzJztcblxuaW1wb3J0IENhcmQgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xuXG5cbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVBhdGg6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYxJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc1NDUwNDBkMi1jYThkLTRhZjQtYmIyOC1jZDA1YTExNjA3ZDcnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cbmxldCBjdXJyZW50VXNlcklkO1xuXG5Qcm9taXNlLmFsbChbXG4gIGFwaS5nZXRTZXJ2ZXJDYXJkcygpLFxuICBhcGkuZ2V0Q3VycmVudFVzZXIoKVxuXSlcbi50aGVuKChbU2VydmVyQ2FyZHMsIHVzZXJdKSA9PiB7XG4gIGN1cnJlbnRVc2VySWQgPSB1c2VyLl9pZDtcbiAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXIpO1xuICBkZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoU2VydmVyQ2FyZHMpOyAvLyDRgdGO0LTQsCDQsdGD0LTRg9GCINC/0YDQuNGF0L7QtNC40YLRjCDQutCw0YDRgtC+0YfQutC4INGBINGB0LXRgNCy0LXRgNCwXG59KVxuLmNhdGNoKChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coZXJyKTtcbn0pO1xuXG4vLyDQktGB0YLQsNCy0LjQvCDQutCw0YDRgtC+0YfQutC4IGMg0YHQtdGA0LLQtdGA0LAg0LIgRE9NXG5jb25zdCBkZWZhdWx0Q2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIGRlZmF1bHRDYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICB9LFxufSwgJy5lbGVtZW50c19fYm94Jyk7XG5cbmNvbnN0IGhhbmRsZUNvbmZpcm1EZWxldGUgPSAoY2FyZCkgPT4ge1xuICBhcGkuZGVsZXRlQ2FyZChjYXJkLmdldElkKCkpXG4gIC50aGVuKCgpID0+IHtcbiAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICBwb3B1cFdpdGhDb25maXJtRGVsZXRlLmNsb3NlKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG59XG5cbmNvbnN0IHBvcHVwV2l0aENvbmZpcm1EZWxldGUgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcucG9wdXBfbW9kaWZ5X2NvbmZpcm0nLCBoYW5kbGVDb25maXJtRGVsZXRlKTtcbnBvcHVwV2l0aENvbmZpcm1EZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YTogZGF0YSxcbiAgICBjdXJyZW50VXNlcklkOiBjdXJyZW50VXNlcklkLFxuICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgcG9wdXBJbWFnZS5vcGVuKGRhdGEpO1xuICAgIH0sXG4gICAgaGFuZGxlQWRkTGlrZTogKCkgPT4ge1xuICAgICAgYXBpLmxpa2UoY2FyZC5nZXRJZCgpKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlQ2xpY2soZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlRGVsTGlrZTogKCkgPT4ge1xuICAgICAgYXBpLmRpc2xpa2UoY2FyZC5nZXRJZCgpKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlQ2xpY2soZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlVHJhc2hDbGljazogKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoQ29uZmlybURlbGV0ZS5vcGVuKGNhcmQpO1xuICAgIH1cbiAgfSwgJy50ZW1wbGF0ZS1jYXJkJyk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufTtcblxuY29uc3QgcHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRm9ybVVzZXIpO1xucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jb25zdCDRgWFyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRm9ybVBsYWNlKTtcbtGBYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNvbnN0IGF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRm9ybUF2YXRhcik7XG5hdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfbW9kaWZ5X2ltYWdlJyk7XG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuXG5jb25zdCBwcm9maWxlVXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX3RpdGxlJyxcbiAgdXNlckpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX3N1YnRpdGxlJyxcbiAgdXNlckF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcidcbn0pO1xuXG5jb25zdCBwb3B1cFdpdGhGb3JtUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF9tb2RpZnlfdXNlci1pbmZvJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBwb3B1cFdpdGhGb3JtUHJvZmlsZS5zaG93TG9hZGluZyh0cnVlKTtcbiAgICBhcGkudXBkYXRlVXNlckluZm8oZGF0YSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcG9wdXBXaXRoRm9ybVByb2ZpbGUuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoRm9ybVByb2ZpbGUuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG4gIH1cbn0pO1xucG9wdXBXaXRoRm9ybVByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8g0JrQu9C40LogLT4g0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAsINC30LDQv9C+0LvQvdC10L3QuNC1INC40L3Qv9GD0YLQvtCyXG5idXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCBwcm9maWxlRGF0YSA9IHByb2ZpbGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5uYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhLmpvYjtcbiAgcG9wdXBGb3JtVXNlci5yZXNldCgpO1xuICBwcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cFdpdGhGb3JtUHJvZmlsZS5vcGVuKCk7XG59KTtcblxuY29uc3QgcG9wdXBXaXRoRm9ybUNhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfbW9kaWZ5X25ldy1wbGFjZScsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgcG9wdXBXaXRoRm9ybUNhcmQuc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgYXBpLnBvc3ROZXdDYXJkKGRhdGEpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGRlZmF1bHRDYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xuICAgICAgcG9wdXBXaXRoRm9ybUNhcmQuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoRm9ybUNhcmQuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG4gIH1cbn0pO1xucG9wdXBXaXRoRm9ybUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEZvcm1QbGFjZS5yZXNldCgpO1xuICDRgWFyZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcG9wdXBXaXRoRm9ybUNhcmQub3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwV2l0aEZvcm1BdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfbW9kaWZ5X2F2YXRhcicsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgcG9wdXBXaXRoRm9ybUF2YXRhci5zaG93TG9hZGluZyh0cnVlKTtcbiAgICBhcGlcbiAgICAudXBkYXRlQXZhdGFyKGRhdGEpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcylcbiAgICAgIHBvcHVwV2l0aEZvcm1BdmF0YXIuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoRm9ybUF2YXRhci5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG4gIH1cbn0pXG5wb3B1cFdpdGhGb3JtQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBXaXRoRm9ybUF2YXRhci5vcGVuKCk7XG4gIHBvcHVwRm9ybUF2YXRhci5yZXNldCgpO1xuICBhdmF0YXJWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcbiJdLCJuYW1lcyI6WyJidXR0b25FZGl0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnV0dG9uQWRkIiwiYnV0dG9uQXZhdGFyIiwicG9wdXBVc2VySW5mbyIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicG9wdXBGb3JtVXNlciIsImZvcm1zIiwicG9wdXBGb3JtUGxhY2UiLCJwb3B1cEZvcm1BdmF0YXIiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwiX3JlZiIsInRlbXBsYXRlU2VsZWN0b3IiLCJkYXRhIiwiY3VycmVudFVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUFkZExpa2UiLCJoYW5kbGVEZWxMaWtlIiwiaGFuZGxlVHJhc2hDbGljayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfZGF0YSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl91c2VySWQiLCJfb3duZXIiLCJvd25lciIsIl9saWtlcyIsImxpa2VzIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUFkZExpa2UiLCJfaGFuZGxlRGVsTGlrZSIsIl9oYW5kbGVUcmFzaENsaWNrIiwia2V5IiwidmFsdWUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2J1dHRvblRyYXNoIiwicmVtb3ZlIiwiX2VsZW1lbnQiLCJfYnV0dG9uTGlrZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwidG9nZ2xlIiwiX2xpa2VzQ291bnRlciIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX3RoaXMiLCJzb21lIiwidXNlciIsImFkZCIsIl90aGlzMiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tSZWFjdGlvbnMiLCJfY2FyZEltYWdlIiwiX3RoaXMzIiwiX2dldFRlbXBsYXRlIiwiX2NhcmRUaXRsZSIsImZvckVhY2giLCJlbCIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jaGVja0RlbGV0aW9uIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImJpbmQiLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlSW5wdXRFcnJvclN0YXRlIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJkaXNhYmxlZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9jb250YWluZXIiLCJfcmVuZGVyZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwiY2xvc2UiLCJ0YXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfcGljdHVyZSIsIl9waWN0dXJlTmFtZSIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfYnRuU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpc0xvYWRpbmciLCJVc2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VySm9iU2VsZWN0b3IiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsIl9hdmF0YXIiLCJqb2IiLCJhdmF0YXIiLCJhYm91dCIsIkFwaSIsImJhc2VQYXRoIiwiaGVhZGVycyIsIl9iYXNlUGF0aCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9nZXRKc29uIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVDb25maXJtRGVsZXRlIiwiX2NhcmRPYmplY3QiLCJfaGFuZGxlQ29uZmlybURlbGV0ZSIsImNhcmQiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0U2VydmVyQ2FyZHMiLCJnZXRDdXJyZW50VXNlciIsIl9yZWYyIiwiU2VydmVyQ2FyZHMiLCJwcm9maWxlVXNlckluZm8iLCJzZXRVc2VySW5mbyIsImRlZmF1bHRDYXJkTGlzdCIsInJlbmRlckl0ZW1zIiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJwb3B1cFdpdGhDb25maXJtRGVsZXRlIiwiZGVsZXRlQ2FyZCIsImdldElkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEltYWdlIiwib3BlbiIsImxpa2UiLCJoYW5kbGVMaWtlQ2xpY2siLCJkaXNsaWtlIiwiZ2VuZXJhdGVDYXJkIiwicHJvZmlsZVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCLRgWFyZFZhbGlkYXRvciIsImF2YXRhclZhbGlkYXRvciIsInBvcHVwV2l0aEZvcm1Qcm9maWxlIiwic2hvd0xvYWRpbmciLCJ1cGRhdGVVc2VySW5mbyIsImZpbmFsbHkiLCJwcm9maWxlRGF0YSIsImdldFVzZXJJbmZvIiwicmVzZXQiLCJyZXNldFZhbGlkYXRpb24iLCJwb3B1cFdpdGhGb3JtQ2FyZCIsInBvc3ROZXdDYXJkIiwicG9wdXBXaXRoRm9ybUF2YXRhciIsInVwZGF0ZUF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=