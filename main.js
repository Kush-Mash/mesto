(()=>{"use strict";var t=document.querySelector(".profile__edit-button"),e=document.querySelector(".profile__add-button"),n=document.querySelector(".profile__avatar-edit-button"),r=document.querySelector(".popup_modify_user-info"),o=r.querySelector(".popup__input_type_name"),i=r.querySelector(".popup__input_type_job"),u=document.forms.formAboutUser,a=document.forms.formAboutPlace,c=document.forms.formAboutAvatar,l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var p=function(){function t(e,n){var r=e.data,o=e.currentUserId,i=e.handleCardClick,u=e.handleAddLike,a=e.handleDelLike,c=e.handleTrashClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=r,this._name=r.name,this._link=r.link,this._id=r._id,this._userId=o,this._owner=r.owner._id,this._likes=r.likes,this._templateSelector=n,this._handleCardClick=i,this._handleAddLike=u,this._handleDelLike=a,this._handleTrashClick=c}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"getId",value:function(){return this._id}},{key:"_checkDeletion",value:function(){this._owner!==this._userId&&(this._buttonTrash.remove(),this._buttonTrash=null)}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_checkReactions",value:function(){this._buttonLike.classList.contains("element__toggle_active")?this._handleDelLike(this._id):this._handleAddLike(this._id)}},{key:"handleLikeClick",value:function(t){this._likes=t.likes,this._buttonLike.classList.toggle("element__toggle_active"),this._likesCounter.textContent=this._likes.length}},{key:"_likeUser",value:function(){var t=this;this._likes.some((function(e){return t._userId===e._id}))&&this._buttonLike.classList.add("element__toggle_active")}},{key:"_setEventListeners",value:function(){var t=this;this._buttonTrash.addEventListener("click",(function(){t._handleTrashClick()})),this._buttonLike.addEventListener("click",(function(){t._checkReactions()})),this._cardImage.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)}))}},{key:"generateCard",value:function(){var t=this;return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".element__mask-group"),this._cardTitle=this._element.querySelector(".element__title"),this._buttonLike=this._element.querySelector(".element__toggle"),this._buttonTrash=this._element.querySelector(".element__trash"),this._likesCounter=this._element.querySelector(".element__counter"),this._likes.forEach((function(e){e._id===t._userId&&t._buttonLike.classList.add("element__toggle_active")})),this._likesCounter.textContent=this._likes.length,this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this._checkDeletion(),this._element}}])&&f(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}var d=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(e.inputSelector)),this._buttonElement=this._formElement.querySelector(e.submitButtonSelector),this._showInputError=this._showInputError.bind(this),this._hideInputError=this._hideInputError.bind(this),this._toggleInputErrorState=this._toggleInputErrorState.bind(this)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),n.textContent=e}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.textContent=""}},{key:"_toggleInputErrorState",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_enableButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._toggleInputErrorState(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}var m=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=document.querySelector(n),this._renderer=r}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){var e=this;t.reverse().forEach((function(t){e._renderer(t)}))}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}var S=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-button"))&&t.close(t._popup)}))}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},E.apply(this,arguments)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._picture=e._popup.querySelector(".popup__picture"),e._pictureName=e._popup.querySelector(".popup__picture-name"),e}return e=u,(n=[{key:"open",value:function(t){E(P(u.prototype),"open",this).call(this),this._picture.src=t.link,this._picture.alt="Фотография места ".concat(t.name),this._pictureName.textContent=t.name}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(S);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._popupForm=e._popup.querySelector(".popup__form"),e._inputList=e._popup.querySelectorAll(".popup__input"),e._btnSubmit=e._popup.querySelector(".popup__button"),e._handleFormSubmit=r,e}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this;I(R(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){I(R(u.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"showLoading",value:function(t){this._btnSubmit.textContent=t?"Сохранение...":"Сохранить"}}])&&L(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(S);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==A(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===A(o)?o:String(o)),r)}var o}var x=function(){function t(e){var n=e.userNameSelector,r=e.userJobSelector,o=e.userAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(n),this._userJob=document.querySelector(r),this._avatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,job:this._userJob.textContent,avatar:this._avatar.src}}},{key:"getUserId",value:function(){return this._id}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t.avatar,o=t._id;this._userName.textContent=e,this._userJob.textContent=n,this._avatar.src=r,this._id=o}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}var U=function(){function t(e){var n=e.basePath,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._basePath=n,this._headers=r}var e,n;return e=t,(n=[{key:"_getJson",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getServerCards",value:function(){return fetch("".concat(this._basePath,"/cards"),{headers:this._headers}).then(this._getJson)}},{key:"postNewCard",value:function(t){return fetch("".concat(this._basePath,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then(this._getJson)}},{key:"getCurrentUser",value:function(){return fetch("".concat(this._basePath,"/users/me"),{headers:this._headers}).then(this._getJson)}},{key:"updateUserInfo",value:function(t){return fetch("".concat(this._basePath,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.job})}).then(this._getJson)}},{key:"updateAvatar",value:function(t){return fetch("".concat(this._basePath,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then(this._getJson)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._basePath,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._getJson)}},{key:"like",value:function(t){return fetch("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then(this._getJson)}},{key:"dislike",value:function(t){return fetch("".concat(this._basePath,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then(this._getJson)}}])&&J(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==N(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===N(o)?o:String(o)),r)}var o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},F.apply(this,arguments)}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(o){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._formElement=n._popup.querySelector(".popup__form_modify_confirm"),n._cardObject={},n._handleConfirmDelete=e,n}return e=u,(n=[{key:"open",value:function(t){F(M(u.prototype),"open",this).call(this),this._cardObject=t}},{key:"setEventListeners",value:function(){var t=this;F(M(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(e){e.preventDefault(),t._handleConfirmDelete(t._cardObject)}))}}])&&V(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(S);function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var G,K=new U({basePath:"https://mesto.nomoreparties.co/v1/cohort-61",headers:{authorization:"545040d2-ca8d-4af4-bb28-cd05a11607d7","Content-Type":"application/json"}});Promise.all([K.getServerCards(),K.getCurrentUser()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];G=i._id,nt.setUserInfo(i),Q.renderItems(o)})).catch((function(t){console.log(t)}));var Q=new m({renderer:function(t){Q.addItem(W(t))}},".elements__box"),W=function(t){var e=new p({data:t,currentUserId:G,handleCardClick:function(){et.open(t)},handleAddLike:function(){K.like(e.getId()).then((function(t){e.handleLikeClick(t)})).catch((function(t){console.log(t)}))},handleDelLike:function(){K.dislike(e.getId()).then((function(t){e.handleLikeClick(t)})).catch((function(t){console.log(t)}))},handleTrashClick:function(){tt.open(e)}},".template-card");return e.generateCard()},X=new d(l,u);X.enableValidation();var Y=new d(l,a);Y.enableValidation();var Z=new d(l,c);Z.enableValidation();var tt=new z(".popup_modify_confirm",(function(t){K.deleteCard(t.getId()).then((function(){t.deleteCard(),tt.close()})).catch((function(t){console.log(t)}))}));tt.setEventListeners();var et=new O(".popup_modify_image");et.setEventListeners();var nt=new x({userNameSelector:".profile__title",userJobSelector:".profile__subtitle",userAvatarSelector:".profile__avatar"}),rt=new q({popupSelector:".popup_modify_user-info",handleFormSubmit:function(t){rt.showLoading(!0),K.updateUserInfo(t).then((function(t){nt.setUserInfo(t),rt.close()})).catch((function(t){console.log(t)})).finally((function(){rt.showLoading(!1)}))}});rt.setEventListeners(),t.addEventListener("click",(function(){var t=nt.getUserInfo();o.value=t.name,i.value=t.job,X.resetValidation(),rt.open()}));var ot=new q({popupSelector:".popup_modify_new-place",handleFormSubmit:function(t){ot.showLoading(!0),K.postNewCard(t).then((function(t){Q.addItem(W(t)),ot.close()})).catch((function(t){console.log(t)})).finally((function(){ot.showLoading(!1)}))}});ot.setEventListeners(),e.addEventListener("click",(function(){Y.resetValidation(),ot.open()}));var it=new q({popupSelector:".popup_modify_avatar",handleFormSubmit:function(t){it.showLoading(!0),K.updateAvatar(t).then((function(t){nt.setUserInfo(t),it.close()})).catch((function(t){console.log(t)})).finally((function(){it.showLoading(!1)}))}});it.setEventListeners(),n.addEventListener("click",(function(){it.open(),Z.resetValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxJQUNDc0IsU0FBUSxXQUNQTSxHQUFvQlIsYUFBWSxFQUNsQyxHQUNGLElBRUZRLEdBQW9CVixvQkFFcEIxTSxFQUFhNkQsaUJBQWlCLFNBQVMsV0FDckN1SixHQUFvQnRCLE9BQ3BCVSxFQUFnQlMsaUJBQ2xCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5jb25zdCBidXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWVkaXQtYnV0dG9uJyk7XHJcbmNvbnN0IHBvcHVwVXNlckluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfbW9kaWZ5X3VzZXItaW5mbycpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBwb3B1cFVzZXJJbmZvLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7XHJcbmNvbnN0IGpvYklucHV0ID0gcG9wdXBVc2VySW5mby5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfam9iJyk7XHJcbmNvbnN0IHBvcHVwRm9ybVVzZXIgPSBkb2N1bWVudC5mb3Jtc1snZm9ybUFib3V0VXNlciddO1xyXG5jb25zdCBwb3B1cEZvcm1QbGFjZSA9IGRvY3VtZW50LmZvcm1zWydmb3JtQWJvdXRQbGFjZSddO1xyXG5jb25zdCBwb3B1cEZvcm1BdmF0YXIgPSBkb2N1bWVudC5mb3Jtc1snZm9ybUFib3V0QXZhdGFyJ107XHJcblxyXG5jb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJ1xyXG59O1xyXG5cclxuZXhwb3J0IHsgYnV0dG9uRWRpdCwgcG9wdXBGb3JtVXNlciwgbmFtZUlucHV0LCBqb2JJbnB1dCxcclxuICBidXR0b25BZGQsIHBvcHVwRm9ybVBsYWNlLCB2YWxpZGF0aW9uQ29uZmlnLCBidXR0b25BdmF0YXIsIHBvcHVwRm9ybUF2YXRhciB9O1xyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHtkYXRhLCBjdXJyZW50VXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUFkZExpa2UsIGhhbmRsZURlbExpa2UsIGhhbmRsZVRyYXNoQ2xpY2t9LCB0ZW1wbGF0ZVNlbGVjdG9yKSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fdXNlcklkID0gY3VycmVudFVzZXJJZDsgLy8gaWQg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINGB0LXQudGH0LDRgVxuICAgIHRoaXMuX293bmVyID0gZGF0YS5vd25lci5faWQ7IC8vIGlkINGF0L7Qt9GP0LjQvdCwINC60LDRgNGC0L7Rh9C60LhcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG5cbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlQWRkTGlrZSA9IGhhbmRsZUFkZExpa2U7XG4gICAgdGhpcy5faGFuZGxlRGVsTGlrZSA9IGhhbmRsZURlbExpa2U7XG4gICAgdGhpcy5faGFuZGxlVHJhc2hDbGljayA9IGhhbmRsZVRyYXNoQ2xpY2s7XG4gIH07XG5cbiAgLy8g0JrQu9C+0L3QuNGA0L7QstCw0YLRjCDQuCDQstC10YDQvdGD0YLRjCDRgNCw0LfQvNC10YLQutGDINGE0L7RgNC80YtcbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZXRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH07XG5cbiAgLy8g0YPQsdC40YDQsNC10YIg0LrQvtGA0LfQuNC90YMg0YEg0YfRg9C20LjRhSDQutCw0YDRgtC+0YfQtdC6XG4gIF9jaGVja0RlbGV0aW9uKCkge1xuICAgIGlmICh0aGlzLl9vd25lciAhPT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICAgdGhpcy5fYnV0dG9uVHJhc2gucmVtb3ZlKCk7XG4gICAgICAgdGhpcy5fYnV0dG9uVHJhc2ggPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTsgLy8g0YPQtNCw0LvRj9C10YLRgdGPINGA0LDQt9C80LXRgtC60LAg0LjQtyBodG1sXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7IC8vINC+0LHQvdGD0LvRj9C10YLRgdGPINGB0LDQvCDQvtCx0YrQtdC60YIg0LrQsNGA0YLQvtGH0LrQuCwg0YfRgtC+0LHRiyDQvdC1INC+0YHRgtCw0LLQsNGC0YzRgdGPINCyINC/0LDQvNGP0YLQuCDQv9GA0LjQu9C+0LbQtdC90LjRjyDQuCDQvdC1INC/0L7RgtGA0LXQsdC70Y/RgtGMINGA0LXRgdGD0YDRgdGLXG4gIH07XG5cbiAgLy8g0YHRgtCw0LLQuNGCL9GD0LHQuNGA0LDQtdGCIDzQl1xuICBfY2hlY2tSZWFjdGlvbnMoKSB7XG4gICAgaWYgKHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50X190b2dnbGVfYWN0aXZlJykpIHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbExpa2UodGhpcy5faWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oYW5kbGVBZGRMaWtlKHRoaXMuX2lkKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVMaWtlQ2xpY2soZGF0YSkge1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX3RvZ2dsZV9hY3RpdmUnKTtcbiAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gIH07XG5cbiAgX2xpa2VVc2VyKCkge1xuICAgIGlmICh0aGlzLl9saWtlcy5zb21lKCh1c2VyKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fdXNlcklkID09PSB1c2VyLl9pZDtcbiAgICB9KSkge1xuICAgICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X190b2dnbGVfYWN0aXZlJyk7XG4gICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnV0dG9uVHJhc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVUcmFzaENsaWNrKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2NoZWNrUmVhY3Rpb25zKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspXG4gICAgfSk7XG4gIH07XG5cbiAgLy8g0J3QsNC/0L7Qu9C90LjRgtGMINGC0LXQvNC/0LvQtdC50YIg0YHQvtC00LXRgNC20LjQvNGL0LxcbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIC8vINCX0LDQv9C40YjQtdC8INGA0LDQt9C80LXRgtC60YMg0LIg0L/RgNC40LLQsNGC0L3QvtC1INC/0L7Qu9C1IF9lbGVtZW50LlxuICAgIC8vINCi0LDQuiDRgyDQtNGA0YPQs9C40YUg0Y3Qu9C10LzQtdC90YLQvtCyINC/0L7Rj9Cy0LjRgtGB0Y8g0LTQvtGB0YLRg9C/INC6INC90LXQuS5cbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX21hc2stZ3JvdXAnKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZScpO1xuICAgIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190b2dnbGUnKTtcbiAgICB0aGlzLl9idXR0b25UcmFzaCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RyYXNoJyk7XG4gICAgdGhpcy5fbGlrZXNDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fY291bnRlcicpO1xuICAgIHRoaXMuX2xpa2VzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBpZiAoZWwuX2lkID09PSB0aGlzLl91c2VySWQpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X190b2dnbGVfYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fY2hlY2tEZWxldGlvbigpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH07XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5fc2hvd0lucHV0RXJyb3IgPSB0aGlzLl9zaG93SW5wdXRFcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IgPSB0aGlzLl9oaWRlSW5wdXRFcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvclN0YXRlID0gdGhpcy5fdG9nZ2xlSW5wdXRFcnJvclN0YXRlLmJpbmQodGhpcyk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC00L7QsdCw0LLQu9GP0LXRgiDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5XHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAvLyDQndCw0YXQvtC00LjQvCDRjdC70LXQvNC10L3RgiDQvtGI0LjQsdC60Lgg0LLQvdGD0YLRgNC4INGB0LDQvNC+0Lkg0YTRg9C90LrRhtC40LhcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICB9O1xyXG5cclxuICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0YPQtNCw0LvRj9C10YIg0LrQu9Cw0YHRgSDRgSDQvtGI0LjQsdC60L7QuVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICB9O1xyXG5cclxuICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0L/RgNC+0LLQtdGA0Y/QtdGCINCy0LDQu9C40LTQvdC+0YHRgtGMINC/0L7Qu9GPXHJcbiAgX3RvZ2dsZUlucHV0RXJyb3JTdGF0ZShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g0KTRg9C90LrRhtC40Y8g0LLQtdGA0L3RkdGCIHRydWUg0LXRgdC70Lgg0YXQvtGC0Y8g0LHRiyDQvtC00L3QviDQv9C+0LvQtSDQvdC10LLQsNC70LjQtNC90L5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KVxyXG4gIH07XHJcblxyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfTtcclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9O1xyXG5cclxuICAvLyDQkNC60YLQuNCy0L3QsNGPL9C90LXQsNC60YLQuNCy0L3QsNGPINC60L3QvtC/0LrQsFxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vINCV0YHQu9C4INC10YHRgtGMINGF0L7RgtGPINCx0Ysg0L7QtNC40L0g0L3QtdCy0LDQu9C40LTQvdGL0Lkg0LjQvdC/0YPRglxyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vINCe0LHQvtC50LTRkdC8INCy0YHQtSDRjdC70LXQvNC10L3RgtGLINC/0L7Qu9GD0YfQtdC90L3QvtC5INC60L7Qu9C70LXQutGG0LjQuFxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAvLyDQutCw0LbQtNC+0LzRgyDQv9C+0LvRjiDQtNC+0LHQsNCy0LjQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBpbnB1dFxyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvclN0YXRlKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH07XHJcbn07XHJcbiIsIi8vINCR0LXRgNGR0YIg0YDQsNC30LzQtdGC0LrRgyDQuCDQstGB0YLQsNCy0LvRj9C10YIg0LIgRE9NXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3Ioe3JlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHsgLy8g0YPQsdGA0LDQu9C4IGl0ZW1zINC40Lcg0LDRgNCz0YPQvNC10L3RgtC+0LIg0Lgg0LjQtyDQutC+0L3RgdGC0YDRg9C60YLQvtGA0LBcbiAgICAvLyB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgfTtcblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfTtcblxuICByZW5kZXJJdGVtcyhpdGVtcykgeyAvLyBpdGVtcyDRgdGO0LTQsCDQsdGD0LTRg9GCINC/0YDQuNGF0L7QtNC40YLRjCDQutCw0YDRgtC+0YfQutC4INGBINGB0LXRgNCy0LXRgNCwXG4gICAgaXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHsgLy8g0LLQvNC10YHRgtC+INC90LDRh9Cw0LvRjNC90YvRhSB0aGlzLl9yZW5kZXJlZEl0ZW1zINC/0L7RgdGC0LDQstC40LvQuCDQutCw0YDRgtC+0YfQutC4INGBINGB0LXRgNCy0LXRgNCwIC0gaXRlbXNcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9O1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfTtcclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9O1xyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJykpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKHRoaXMuX3BvcHVwKVxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfTtcclxufTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BpY3R1cmUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3BpY3R1cmUnKTtcclxuICAgIHRoaXMuX3BpY3R1cmVOYW1lID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19waWN0dXJlLW5hbWUnKTtcclxuICB9O1xyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX3BpY3R1cmUuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fcGljdHVyZS5hbHQgPSBg0KTQvtGC0L7Qs9GA0LDRhNC40Y8g0LzQtdGB0YLQsCAke2RhdGEubmFtZX1gO1xyXG4gICAgdGhpcy5fcGljdHVyZU5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgfTtcclxufTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHtwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0fSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB0aGlzLl9idG5TdWJtaXQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xuICAgIC8vINC60L7Qu9Cx0Y3QuiDRgdCw0LHQvNC40YLQsCDRhNC+0YDQvNGLXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH07XG5cbiAgLy8g0KHQsdC+0YAg0LTQsNC90L3Ri9GFINCy0YHQtdGFINC/0L7Qu9C10Lkg0YTQvtGA0LzRi1xuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgLy8g0L/Rg9GB0YLQvtC5INC+0LHRitC10LrRglxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICAvLyDQt9C90LDRh9C10L3QuNGPINCy0YHQtdGFINC/0L7Qu9C10Lkg0L7QsdGK0LXQutGC0LBcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH07XG5cbiAgLy8gLy8g0JLRgdGC0LDQstC70Y/QtdC8INC00LDQvdC90YvQtSDQsiDQuNC90L/Rg9GC0YsgKNGB0LTQtdC70LDRgtGMINC/0L7RgtC+0LwpXG4gIC8vIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgLy8gICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgLy8gICAgIC8vINGC0YPRgiDQstGB0YLQsNCy0LvRj9C10Lwg0LIgYHZhbHVlYCDQuNC90L/Rg9GC0LAg0LTQsNC90L3Ri9C1INC40Lcg0L7QsdGK0LXQutGC0LAg0L/QviDQsNGC0YDQuNCx0YPRgtGDIGBuYW1lYCDRjdGC0L7Qs9C+INC40L3Qv9GD0YLQsFxuICAvLyAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAvLyAgIH0pO1xuICAvLyB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyDQv9C10YDQtdC00LDRkdC8INGE0YPQvdC60YbQuNC4INC+0LHRitC10LrRgiDQt9C90LDRh9C10L3QuNC5INC40L3Qv9GD0YLQvtCyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KClcbiAgfTtcblxuICBzaG93TG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9idG5TdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idG5TdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJztcbiAgICB9O1xuICB9O1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe3VzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhclNlbGVjdG9yKTtcbiAgfTtcblxuICAvLyDQotC+LCDRh9GC0L4g0L3QsCDQtNCw0L3QvdGL0Lkg0LzQvtC80LXQvdGCINC40LfQstC10YHRgtC90L4g0L4g0Y7Qt9C10YDQtSwg0L/QvtC80LXRidCw0LXRgtGB0Y8g0LIg0LjQvdC/0YPRgtGLINC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmNcbiAgICB9O1xuICAgIHJldHVybiB1c2VySW5mbztcbiAgfTtcblxuICBnZXRVc2VySWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG5cbiAgLy8gLy8g0JTQsNC90L3Ri9C1INGBINGB0LXRgNCy0LXRgNCwINC/0L7QtNGB0YLQsNCy0LvRj9C10Lwg0LIg0L/RgNC+0YTQuNC70YxcbiAgc2V0VXNlckluZm8oIHsgbmFtZSwgYWJvdXQsIGF2YXRhciwgX2lkIH0gKSB7XG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICAgIHRoaXMuX2lkID0gX2lkO1xuICB9XG59O1xuIiwiXG4vLyDQotC+0LrQtdC9OiA1NDUwNDBkMi1jYThkLTRhZjQtYmIyOC1jZDA1YTExNjA3ZDdcbi8vINCY0LTQtdC90YLQuNGE0LjQutCw0YLQvtGAINCz0YDRg9C/0L/RizogY29ob3J0LTYxXG4vLyDQkNC00YDQtdGBINGB0LXRgNCy0LXRgNCwINC/0YDQvtC10LrRgtCwIE1lc3RvOiBodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28uXG5cbi8vINCY0LTQtdC90YLQuNGE0LjQutCw0YLQvtGAINCz0YDRg9C/0L/RiyDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0LIgVVJMINGB0YDQsNC30YMg0L/QvtGB0LvQtSB2MS4g0JLRgdC10LPQtNCwINC+0LHRgNCw0YnQsNC50YLQtdGB0Ywg0Log0YHQstC+0LXQuSDQs9GA0YPQv9C/0LUuINCV0YHQu9C4INC+0LHRgNCw0YLQuNGC0YzRgdGPINC6INGH0YPQttC+0LksINGB0LXRgNCy0LXRgCDQstC10YDQvdGR0YIg0L7RiNC40LHQutGDLlxuXG4vLyBHRVQgaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydElkL3VzZXJzL21lXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHtiYXNlUGF0aCwgaGVhZGVyc30pIHtcbiAgICB0aGlzLl9iYXNlUGF0aCA9IGJhc2VQYXRoO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgX2dldEpzb24ocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRTZXJ2ZXJDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVBhdGh9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fZ2V0SnNvbik7XG4gIH1cblxuICBwb3N0TmV3Q2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBkYXRhLmxpbmtcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fZ2V0SnNvbik7XG4gIH1cblxuICAvLyDQn9C+0LvRg9GH0LjRgtGMINC00LDQvdC90YvQtSDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcbiAgZ2V0Q3VycmVudFVzZXIoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VQYXRofS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2dldEpzb24pO1xuICB9XG5cbiAgLy8g0J7QsdC90L7QstC40YLRjCDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gIHVwZGF0ZVVzZXJJbmZvKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVBhdGh9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogZGF0YS5qb2JcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9nZXRKc29uKVxuICB9XG5cbiAgLy8g0J7QsdC90L7QstC40YLRjCDQsNCy0LDRgtCw0YBcbiAgdXBkYXRlQXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVBhdGh9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXJcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9nZXRKc29uKVxuICB9XG5cbiAgZGVsZXRlQ2FyZChfaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVBhdGh9L2NhcmRzLyR7X2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fZ2V0SnNvbik7XG4gIH1cblxuICBsaWtlKF9pZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlUGF0aH0vY2FyZHMvJHtfaWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2dldEpzb24pXG4gIH1cblxuICBkaXNsaWtlKF9pZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlUGF0aH0vY2FyZHMvJHtfaWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2dldEpzb24pXG4gIH1cbn1cblxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUNvbmZpcm1EZWxldGUpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV9tb2RpZnlfY29uZmlybScpO1xuICAgIHRoaXMuX2NhcmRPYmplY3QgPSB7fTtcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtRGVsZXRlID0gaGFuZGxlQ29uZmlybURlbGV0ZTtcbiAgfTtcblxuICBvcGVuKGNhcmQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fY2FyZE9iamVjdCA9IGNhcmQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGV2dCA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1EZWxldGUodGhpcy5fY2FyZE9iamVjdCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IGJ1dHRvbkVkaXQsIHBvcHVwRm9ybVVzZXIsIG5hbWVJbnB1dCwgam9iSW5wdXQsXG4gIGJ1dHRvbkFkZCwgcG9wdXBGb3JtUGxhY2UsIHZhbGlkYXRpb25Db25maWcsIGJ1dHRvbkF2YXRhciwgcG9wdXBGb3JtQXZhdGFyIH0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMnO1xuXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5cblxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlUGF0aDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjEnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzU0NTA0MGQyLWNhOGQtNGFmNC1iYjI4LWNkMDVhMTE2MDdkNycsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9XG59KTtcblxubGV0IGN1cnJlbnRVc2VySWQ7XG5cblByb21pc2UuYWxsKFtcbiAgYXBpLmdldFNlcnZlckNhcmRzKCksXG4gIGFwaS5nZXRDdXJyZW50VXNlcigpXG5dKVxuLnRoZW4oKFtzZXJ2ZXJDYXJkcywgdXNlcl0pID0+IHtcbiAgY3VycmVudFVzZXJJZCA9IHVzZXIuX2lkO1xuICBwcm9maWxlVXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XG4gIGRlZmF1bHRDYXJkTGlzdC5yZW5kZXJJdGVtcyhzZXJ2ZXJDYXJkcyk7IC8vINGB0Y7QtNCwINCx0YPQtNGD0YIg0L/RgNC40YXQvtC00LjRgtGMINC60LDRgNGC0L7Rh9C60Lgg0YEg0YHQtdGA0LLQtdGA0LBcbn0pXG4uY2F0Y2goKGVycikgPT4ge1xuICBjb25zb2xlLmxvZyhlcnIpO1xufSk7XG5cbi8vINCS0YHRgtCw0LLQuNC8INC60LDRgNGC0L7Rh9C60LggYyDRgdC10YDQstC10YDQsCDQsiBET01cbmNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgZGVmYXVsdENhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gIH0sXG59LCAnLmVsZW1lbnRzX19ib3gnKTtcblxuY29uc3QgaGFuZGxlQ29uZmlybURlbGV0ZSA9IChjYXJkKSA9PiB7XG4gIGFwaS5kZWxldGVDYXJkKGNhcmQuZ2V0SWQoKSlcbiAgLnRoZW4oKCkgPT4ge1xuICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgIHBvcHVwV2l0aENvbmZpcm1EZWxldGUuY2xvc2UoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcbn1cblxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YTogZGF0YSxcbiAgICBjdXJyZW50VXNlcklkOiBjdXJyZW50VXNlcklkLFxuICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgcG9wdXBJbWFnZS5vcGVuKGRhdGEpO1xuICAgIH0sXG4gICAgaGFuZGxlQWRkTGlrZTogKCkgPT4ge1xuICAgICAgYXBpLmxpa2UoY2FyZC5nZXRJZCgpKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlQ2xpY2soZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlRGVsTGlrZTogKCkgPT4ge1xuICAgICAgYXBpLmRpc2xpa2UoY2FyZC5nZXRJZCgpKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlQ2xpY2soZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlVHJhc2hDbGljazogKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoQ29uZmlybURlbGV0ZS5vcGVuKGNhcmQpO1xuICAgIH1cbiAgfSwgJy50ZW1wbGF0ZS1jYXJkJyk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufTtcblxuY29uc3QgcHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRm9ybVVzZXIpO1xucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jb25zdCDRgWFyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRm9ybVBsYWNlKTtcbtGBYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNvbnN0IGF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRm9ybUF2YXRhcik7XG5hdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwb3B1cFdpdGhDb25maXJtRGVsZXRlID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbignLnBvcHVwX21vZGlmeV9jb25maXJtJywgaGFuZGxlQ29uZmlybURlbGV0ZSk7XG5wb3B1cFdpdGhDb25maXJtRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfbW9kaWZ5X2ltYWdlJyk7XG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuXG5jb25zdCBwcm9maWxlVXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX3RpdGxlJyxcbiAgdXNlckpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX3N1YnRpdGxlJyxcbiAgdXNlckF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcidcbn0pO1xuXG5jb25zdCBwb3B1cFdpdGhGb3JtUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF9tb2RpZnlfdXNlci1pbmZvJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBwb3B1cFdpdGhGb3JtUHJvZmlsZS5zaG93TG9hZGluZyh0cnVlKTtcbiAgICBhcGkudXBkYXRlVXNlckluZm8oZGF0YSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcG9wdXBXaXRoRm9ybVByb2ZpbGUuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoRm9ybVByb2ZpbGUuc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG4gIH1cbn0pO1xucG9wdXBXaXRoRm9ybVByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8g0JrQu9C40LogLT4g0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAsINC30LDQv9C+0LvQvdC10L3QuNC1INC40L3Qv9GD0YLQvtCyXG5idXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCBwcm9maWxlRGF0YSA9IHByb2ZpbGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5uYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhLmpvYjtcbiAgcHJvZmlsZVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcG9wdXBXaXRoRm9ybVByb2ZpbGUub3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwV2l0aEZvcm1DYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX21vZGlmeV9uZXctcGxhY2UnLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIHBvcHVwV2l0aEZvcm1DYXJkLnNob3dMb2FkaW5nKHRydWUpO1xuICAgIGFwaS5wb3N0TmV3Q2FyZChkYXRhKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBkZWZhdWx0Q2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcbiAgICAgIC8vINC30LDQutGA0YvRgtC40LUg0L/QvtGB0LvQtSDRg9C00LDRh9C90L7Qs9C+INC+0YLQstC10YLQsCDQvtGCINGB0LXRgNCy0LXRgNCwXG4gICAgICBwb3B1cFdpdGhGb3JtQ2FyZC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cFdpdGhGb3JtQ2FyZC5zaG93TG9hZGluZyhmYWxzZSk7XG4gICAgfSlcbiAgfVxufSk7XG5wb3B1cFdpdGhGb3JtQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gINGBYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cFdpdGhGb3JtQ2FyZC5vcGVuKCk7XG59KTtcblxuY29uc3QgcG9wdXBXaXRoRm9ybUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF9tb2RpZnlfYXZhdGFyJyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBwb3B1cFdpdGhGb3JtQXZhdGFyLnNob3dMb2FkaW5nKHRydWUpO1xuICAgIGFwaVxuICAgIC51cGRhdGVBdmF0YXIoZGF0YSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckluZm8ocmVzKVxuICAgICAgcG9wdXBXaXRoRm9ybUF2YXRhci5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cFdpdGhGb3JtQXZhdGFyLnNob3dMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbiAgfVxufSlcbnBvcHVwV2l0aEZvcm1BdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cFdpdGhGb3JtQXZhdGFyLm9wZW4oKTtcbiAgYXZhdGFyVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG4iXSwibmFtZXMiOlsiYnV0dG9uRWRpdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJ1dHRvbkFkZCIsImJ1dHRvbkF2YXRhciIsInBvcHVwVXNlckluZm8iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInBvcHVwRm9ybVVzZXIiLCJmb3JtcyIsInBvcHVwRm9ybVBsYWNlIiwicG9wdXBGb3JtQXZhdGFyIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsIl9yZWYiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiZGF0YSIsImN1cnJlbnRVc2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVBZGRMaWtlIiwiaGFuZGxlRGVsTGlrZSIsImhhbmRsZVRyYXNoQ2xpY2siLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2RhdGEiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfdXNlcklkIiwiX293bmVyIiwib3duZXIiLCJfbGlrZXMiLCJsaWtlcyIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVBZGRMaWtlIiwiX2hhbmRsZURlbExpa2UiLCJfaGFuZGxlVHJhc2hDbGljayIsImtleSIsInZhbHVlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9idXR0b25UcmFzaCIsInJlbW92ZSIsIl9lbGVtZW50IiwiX2J1dHRvbkxpa2UiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInRvZ2dsZSIsIl9saWtlc0NvdW50ZXIiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl90aGlzIiwic29tZSIsInVzZXIiLCJhZGQiLCJfdGhpczIiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrUmVhY3Rpb25zIiwiX2NhcmRJbWFnZSIsIl90aGlzMyIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkVGl0bGUiLCJmb3JFYWNoIiwiZWwiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2hlY2tEZWxldGlvbiIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJiaW5kIiwiX2hpZGVJbnB1dEVycm9yIiwiX3RvZ2dsZUlucHV0RXJyb3JTdGF0ZSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZGlzYWJsZWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfY29udGFpbmVyIiwiX3JlbmRlcmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtcyIsInJldmVyc2UiLCJpdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsb3NlIiwidGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX3BpY3R1cmUiLCJfcGljdHVyZU5hbWUiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX2J0blN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJpc0xvYWRpbmciLCJVc2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VySm9iU2VsZWN0b3IiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsIl9hdmF0YXIiLCJqb2IiLCJhdmF0YXIiLCJfcmVmMiIsImFib3V0IiwiQXBpIiwiYmFzZVBhdGgiLCJoZWFkZXJzIiwiX2Jhc2VQYXRoIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2dldEpzb24iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImhhbmRsZUNvbmZpcm1EZWxldGUiLCJfY2FyZE9iamVjdCIsIl9oYW5kbGVDb25maXJtRGVsZXRlIiwiY2FyZCIsImFwaSIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRTZXJ2ZXJDYXJkcyIsImdldEN1cnJlbnRVc2VyIiwic2VydmVyQ2FyZHMiLCJwcm9maWxlVXNlckluZm8iLCJzZXRVc2VySW5mbyIsImRlZmF1bHRDYXJkTGlzdCIsInJlbmRlckl0ZW1zIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJwb3B1cEltYWdlIiwib3BlbiIsImxpa2UiLCJnZXRJZCIsImhhbmRsZUxpa2VDbGljayIsImRpc2xpa2UiLCJwb3B1cFdpdGhDb25maXJtRGVsZXRlIiwiZ2VuZXJhdGVDYXJkIiwicHJvZmlsZVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCLRgWFyZFZhbGlkYXRvciIsImF2YXRhclZhbGlkYXRvciIsImRlbGV0ZUNhcmQiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwV2l0aEZvcm1Qcm9maWxlIiwic2hvd0xvYWRpbmciLCJ1cGRhdGVVc2VySW5mbyIsImZpbmFsbHkiLCJwcm9maWxlRGF0YSIsImdldFVzZXJJbmZvIiwicmVzZXRWYWxpZGF0aW9uIiwicG9wdXBXaXRoRm9ybUNhcmQiLCJwb3N0TmV3Q2FyZCIsInBvcHVwV2l0aEZvcm1BdmF0YXIiLCJ1cGRhdGVBdmF0YXIiXSwic291cmNlUm9vdCI6IiJ9